<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
    <link rel="stylesheet" href="css/styleGames.css">
    <title>Salvo</title>
</head>

<body>

    <div class="container-fluid" id="app">

        <div class="row" id="register" v-show="data.player == null">
            <div class="col-4">
                <form id="login-form" onsubmit="return false">
                    <label>
                        <p>Name: <input type="text" v-model:name="username"></p>
                    </label>
                    <label>
                        <p>Password: <input type="password" v-model:name="password"></p>
                    </label>
                </form>
            </div>
            <div class="col-8">
                <button type="button" v-on:click="login">Log In</button>
                <button type="button" v-on:click="createUser">Sing In</button>
            </div>
        </div>

        <div class="row" id="logout" v-show="data.player != null">
            <div class="col-5">
                <button id="buttonLogout" type="button" v-on:click="logout">Log Out</button>
            </div>
            <div class="col-5">
                <h5 v-if="data.player != null">Hello {{data.player.email}}!</h5>
            </div>
            <div class="col-2">
                <button v-on:click="createGame">create</button>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <h1 class="text-center">Salvo!</h1>
            </div>
        </div>
        <div class="contenedor row justify-content-center">
            <div class="col-xs-12 col-lg-5">
                <ol>
                    <li v-for="game in data.games">{{game.date}}
                        <ul>
                            <li v-for="gamePlayer in game.gamePlayers">{{gamePlayer.player.email}}<a
                                    v-if="data.player != null && data.player.id == gamePlayer.player.id"
                                    v-bind:href="url+gamePlayer.id"><button
                                        class="btn btn-dark text-light">game {{game.id}}</button></a>
                                        
                                <button class="join btn btn-dark text-light"
                                    v-if="data.player != null && data.player.id != gamePlayer.player.id &&
                                     game.gamePlayers.length==1"
                                    v-on:click="joinGame(game.id)">join</button>
                            </li>
                        </ul>
                    </li>
                </ol>
            </div>
            <div class="col-xs-12 col-lg-5">
                <table id="tablePlayers" class="table table-dark">
                    <thead>
                        <tr>
                            <th>Player</th>
                            <th>Total Scores</th>
                            <th>Total Wins</th>
                            <th>Total Losses</th>
                            <th>Total Ties</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr v-for="player in players">
                            <td>{{player.email}}</td>
                            <td>{{player.totalScores}}</td>
                            <td>{{player.totalWins}}</td>
                            <td>{{player.totalLosses}}</td>
                            <td>{{player.totalTies}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>




    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"
        integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js"
        integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script src="js/games.js"></script>
</body>

</html>